"use strict";/*
 * Copyright (c) 2018, salesforce.com, inc.
 * All rights reserved.
 * Licensed under the BSD 3-Clause license.
 * For full license text, see LICENSE.txt file in the repo root or https://opensource.org/licenses/BSD-3-Clause
 */var cov_13rvkji7je=function(){var path="/srv/jenkins/workspace/SalesforceDXPublishing-Production/master/sfdx-cli-master-artifacts/repo-artifacts/tmp/base/dist/cli.js";var hash="363eaf6ffac9594ba06c2aad3f8b3b5fe23159e9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/srv/jenkins/workspace/SalesforceDXPublishing-Production/master/sfdx-cli-master-artifacts/repo-artifacts/tmp/base/dist/cli.js",statementMap:{"0":{start:{line:8,column:0},end:{line:8,column:62}},"1":{start:{line:9,column:18},end:{line:9,column:43}},"2":{start:{line:10,column:17},end:{line:10,column:41}},"3":{start:{line:11,column:14},end:{line:11,column:40}},"4":{start:{line:12,column:14},end:{line:12,column:30}},"5":{start:{line:13,column:11},end:{line:13,column:24}},"6":{start:{line:14,column:13},end:{line:14,column:28}},"7":{start:{line:15,column:20},end:{line:15,column:44}},"8":{start:{line:16,column:14},end:{line:16,column:35}},"9":{start:{line:17,column:14},end:{line:17,column:27}},"10":{start:{line:19,column:17},end:{line:19,column:46}},"11":{start:{line:20,column:18},end:{line:20,column:72}},"12":{start:{line:21,column:17},end:{line:21,column:38}},"13":{start:{line:22,column:4},end:{line:34,column:6}},"14":{start:{line:24,column:27},end:{line:24,column:97}},"15":{start:{line:25,column:12},end:{line:25,column:32}},"16":{start:{line:26,column:12},end:{line:26,column:46}},"17":{start:{line:27,column:12},end:{line:27,column:37}},"18":{start:{line:28,column:12},end:{line:28,column:56}},"19":{start:{line:29,column:12},end:{line:31,column:13}},"20":{start:{line:30,column:16},end:{line:30,column:42}},"21":{start:{line:32,column:12},end:{line:32,column:43}},"22":{start:{line:36,column:0},end:{line:36,column:24}},"23":{start:{line:37,column:0},end:{line:38,column:67}},"24":{start:{line:39,column:0},end:{line:39,column:102}},"25":{start:{line:40,column:0},end:{line:41,column:75}},"26":{start:{line:43,column:19},end:{line:43,column:42}},"27":{start:{line:44,column:4},end:{line:47,column:5}},"28":{start:{line:46,column:8},end:{line:46,column:64}},"29":{start:{line:48,column:24},end:{line:48,column:52}},"30":{start:{line:49,column:4},end:{line:52,column:5}},"31":{start:{line:51,column:8},end:{line:51,column:88}},"32":{start:{line:54,column:0},end:{line:54,column:52}},"33":{start:{line:56,column:4},end:{line:61,column:5}},"34":{start:{line:58,column:8},end:{line:58,column:43}},"35":{start:{line:59,column:8},end:{line:59,column:67}},"36":{start:{line:60,column:8},end:{line:60,column:15}},"37":{start:{line:62,column:4},end:{line:68,column:5}},"38":{start:{line:63,column:8},end:{line:63,column:45}},"39":{start:{line:64,column:8},end:{line:66,column:9}},"40":{start:{line:65,column:12},end:{line:65,column:76}},"41":{start:{line:67,column:8},end:{line:67,column:15}},"42":{start:{line:70,column:4},end:{line:73,column:5}},"43":{start:{line:72,column:8},end:{line:72,column:43}},"44":{start:{line:74,column:4},end:{line:76,column:5}},"45":{start:{line:75,column:8},end:{line:75,column:66}},"46":{start:{line:78,column:0},end:{line:78,column:50}},"47":{start:{line:81,column:20},end:{line:81,column:22}},"48":{start:{line:82,column:8},end:{line:82,column:44}},"49":{start:{line:83,column:8},end:{line:83,column:85}},"50":{start:{line:83,column:41},end:{line:83,column:83}},"51":{start:{line:85,column:4},end:{line:90,column:7}},"52":{start:{line:91,column:4},end:{line:93,column:7}},"53":{start:{line:94,column:4},end:{line:101,column:7}},"54":{start:{line:102,column:4},end:{line:115,column:60}},"55":{start:{line:115,column:19},end:{line:115,column:57}},"56":{start:{line:116,column:4},end:{line:116,column:76}},"57":{start:{line:116,column:54},end:{line:116,column:73}}},fnMap:{"0":{name:"create",decl:{start:{line:18,column:9},end:{line:18,column:15}},loc:{start:{line:18,column:76},end:{line:35,column:1}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:8},end:{line:23,column:9}},loc:{start:{line:23,column:20},end:{line:33,column:9}},line:23},"2":{name:"configureUpdateSites",decl:{start:{line:42,column:9},end:{line:42,column:29}},loc:{start:{line:42,column:59},end:{line:53,column:1}},line:42},"3":{name:"configureAutoUpdate",decl:{start:{line:55,column:9},end:{line:55,column:28}},loc:{start:{line:55,column:37},end:{line:77,column:1}},line:55},"4":{name:"debugCliInfo",decl:{start:{line:79,column:9},end:{line:79,column:21}},loc:{start:{line:79,column:53},end:{line:117,column:1}},line:79},"5":{name:"debugSection",decl:{start:{line:80,column:13},end:{line:80,column:25}},loc:{start:{line:80,column:42},end:{line:84,column:5}},line:80},"6":{name:"(anonymous_6)",decl:{start:{line:83,column:22},end:{line:83,column:23}},loc:{start:{line:83,column:41},end:{line:83,column:83}},line:83},"7":{name:"(anonymous_7)",decl:{start:{line:115,column:10},end:{line:115,column:11}},loc:{start:{line:115,column:19},end:{line:115,column:57}},line:115},"8":{name:"(anonymous_8)",decl:{start:{line:116,column:42},end:{line:116,column:43}},loc:{start:{line:116,column:54},end:{line:116,column:73}},line:116}},branchMap:{"0":{loc:{start:{line:18,column:34},end:{line:18,column:53}},type:"default-arg",locations:[{start:{line:18,column:40},end:{line:18,column:53}}],line:18},"1":{loc:{start:{line:18,column:55},end:{line:18,column:74}},type:"default-arg",locations:[{start:{line:18,column:61},end:{line:18,column:74}}],line:18},"2":{loc:{start:{line:29,column:12},end:{line:31,column:13}},type:"if",locations:[{start:{line:29,column:12},end:{line:31,column:13}},{start:{line:29,column:12},end:{line:31,column:13}}],line:29},"3":{loc:{start:{line:29,column:16},end:{line:29,column:66}},type:"binary-expr",locations:[{start:{line:29,column:16},end:{line:29,column:36}},{start:{line:29,column:40},end:{line:29,column:66}}],line:29},"4":{loc:{start:{line:42,column:38},end:{line:42,column:57}},type:"default-arg",locations:[{start:{line:42,column:44},end:{line:42,column:57}}],line:42},"5":{loc:{start:{line:44,column:4},end:{line:47,column:5}},type:"if",locations:[{start:{line:44,column:4},end:{line:47,column:5}},{start:{line:44,column:4},end:{line:47,column:5}}],line:44},"6":{loc:{start:{line:49,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:52,column:5}},{start:{line:49,column:4},end:{line:52,column:5}}],line:49},"7":{loc:{start:{line:56,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:61,column:5}},{start:{line:56,column:4},end:{line:61,column:5}}],line:56},"8":{loc:{start:{line:62,column:4},end:{line:68,column:5}},type:"if",locations:[{start:{line:62,column:4},end:{line:68,column:5}},{start:{line:62,column:4},end:{line:68,column:5}}],line:62},"9":{loc:{start:{line:64,column:8},end:{line:66,column:9}},type:"if",locations:[{start:{line:64,column:8},end:{line:66,column:9}},{start:{line:64,column:8},end:{line:66,column:9}}],line:64},"10":{loc:{start:{line:70,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:73,column:5}},{start:{line:70,column:4},end:{line:73,column:5}}],line:70},"11":{loc:{start:{line:74,column:4},end:{line:76,column:5}},type:"if",locations:[{start:{line:74,column:4},end:{line:76,column:5}},{start:{line:74,column:4},end:{line:76,column:5}}],line:74}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0],"1":[0],"2":[0,0],"3":[0,0],"4":[0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"363eaf6ffac9594ba06c2aad3f8b3b5fe23159e9"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_13rvkji7je.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const command_1=(cov_13rvkji7je.s[1]++,require("@oclif/command"));const config_1=(cov_13rvkji7je.s[2]++,require("@oclif/config"));const kit_1=(cov_13rvkji7je.s[3]++,require("@salesforce/kit"));const Debug=(cov_13rvkji7je.s[4]++,require("debug"));const os=(cov_13rvkji7je.s[5]++,require("os"));const path=(cov_13rvkji7je.s[6]++,require("path"));const lazyRequire=(cov_13rvkji7je.s[7]++,require("./lazyRequire"));const env_1=(cov_13rvkji7je.s[8]++,require("./util/env"));const debug=(cov_13rvkji7je.s[9]++,Debug('sfdx'));function create(version,channel,run=(cov_13rvkji7je.b[0][0]++,command_1.run),env=(cov_13rvkji7je.b[1][0]++,env_1.default)){cov_13rvkji7je.f[0]++;const root=(cov_13rvkji7je.s[10]++,path.resolve(__dirname,'..'));const pjson=(cov_13rvkji7je.s[11]++,require(path.resolve(__dirname,'..','package.json')));const args=(cov_13rvkji7je.s[12]++,process.argv.slice(2));cov_13rvkji7je.s[13]++;return{async run(){cov_13rvkji7je.f[1]++;const config=(cov_13rvkji7je.s[14]++,new config_1.Config({name:pjson.oclif.bin,root,version,channel}));cov_13rvkji7je.s[15]++;await config.load();cov_13rvkji7je.s[16]++;configureUpdateSites(config,env);cov_13rvkji7je.s[17]++;configureAutoUpdate(env);cov_13rvkji7je.s[18]++;debugCliInfo(version,channel,env,config);cov_13rvkji7je.s[19]++;if((cov_13rvkji7je.b[3][0]++,args[1]!=='update')&&(cov_13rvkji7je.b[3][1]++,env.isLazyRequireEnabled())){cov_13rvkji7je.b[2][0]++;cov_13rvkji7je.s[20]++;lazyRequire.start(config);}else{cov_13rvkji7je.b[2][1]++;}cov_13rvkji7je.s[21]++;return await run(args,config);}};}cov_13rvkji7je.s[22]++;exports.create=create;cov_13rvkji7je.s[23]++;exports.UPDATE_DISABLED_INSTALLER='Manual and automatic CLI updates have been disabled by setting "SFDX_AUTOUPDATE_DISABLE=true". '+'To check for a new version, unset that environment variable.';cov_13rvkji7je.s[24]++;exports.UPDATE_DISABLED_NPM='Use "npm update --global sfdx-cli" to update npm-based installations.';cov_13rvkji7je.s[25]++;exports.UPDATE_DISABLED_DEMO='Manual and automatic CLI updates have been disabled in DEMO mode. '+'To check for a new version, unset the environment variable SFDX_ENV.';function configureUpdateSites(config,env=(cov_13rvkji7je.b[4][0]++,env_1.default)){cov_13rvkji7je.f[2]++;const s3Host=(cov_13rvkji7je.s[26]++,env.getS3HostOverride());cov_13rvkji7je.s[27]++;if(s3Host){cov_13rvkji7je.b[5][0]++;cov_13rvkji7je.s[28]++;// Override config value if set via envar
kit_1.set(config,'pjson.oclif.update.s3.host',s3Host);}else{cov_13rvkji7je.b[5][1]++;}const npmRegistry=(cov_13rvkji7je.s[29]++,env.getNpmRegistryOverride());cov_13rvkji7je.s[30]++;if(npmRegistry){cov_13rvkji7je.b[6][0]++;cov_13rvkji7je.s[31]++;// Override config value if set via envar
kit_1.set(config,'pjson.oclif.warn-if-update-available.registry',npmRegistry);}else{cov_13rvkji7je.b[6][1]++;}}cov_13rvkji7je.s[32]++;exports.configureUpdateSites=configureUpdateSites;function configureAutoUpdate(envars){cov_13rvkji7je.f[3]++;cov_13rvkji7je.s[33]++;if(envars.isDemoMode()){cov_13rvkji7je.b[7][0]++;cov_13rvkji7je.s[34]++;// Disable autoupdates in demo mode
envars.setAutoupdateDisabled(true);cov_13rvkji7je.s[35]++;envars.setUpdateInstructions(exports.UPDATE_DISABLED_DEMO);cov_13rvkji7je.s[36]++;return;}else{cov_13rvkji7je.b[7][1]++;}cov_13rvkji7je.s[37]++;if(envars.isInstaller()){cov_13rvkji7je.b[8][0]++;cov_13rvkji7je.s[38]++;envars.normalizeAutoupdateDisabled();cov_13rvkji7je.s[39]++;if(envars.isAutoupdateDisabled()){cov_13rvkji7je.b[9][0]++;cov_13rvkji7je.s[40]++;envars.setUpdateInstructions(exports.UPDATE_DISABLED_INSTALLER);}else{cov_13rvkji7je.b[9][1]++;}cov_13rvkji7je.s[41]++;return;}else{cov_13rvkji7je.b[8][1]++;}// Not an installer, so this must be running from an npm installation
cov_13rvkji7je.s[42]++;if(!envars.isAutoupdateDisabledSet()){cov_13rvkji7je.b[10][0]++;cov_13rvkji7je.s[43]++;// Disable autoupdates if run from an npm install or in local dev, if not explicitly set
envars.setAutoupdateDisabled(true);}else{cov_13rvkji7je.b[10][1]++;}cov_13rvkji7je.s[44]++;if(envars.isAutoupdateDisabled()){cov_13rvkji7je.b[11][0]++;cov_13rvkji7je.s[45]++;envars.setUpdateInstructions(exports.UPDATE_DISABLED_NPM);}else{cov_13rvkji7je.b[11][1]++;}}cov_13rvkji7je.s[46]++;exports.configureAutoUpdate=configureAutoUpdate;function debugCliInfo(version,channel,env,config){cov_13rvkji7je.f[4]++;function debugSection(section,items){cov_13rvkji7je.f[5]++;const pad=(cov_13rvkji7je.s[47]++,25);cov_13rvkji7je.s[48]++;debug('%s:',section.padStart(pad));cov_13rvkji7je.s[49]++;items.forEach(([name,value])=>{cov_13rvkji7je.f[6]++;cov_13rvkji7je.s[50]++;return debug('%s: %s',name.padStart(pad),value);});}cov_13rvkji7je.s[51]++;debugSection('OS',[['platform',os.platform()],['architecture',os.arch()],['release',os.release()],['shell',config.shell]]);cov_13rvkji7je.s[52]++;debugSection('NODE',[['version',process.versions.node]]);cov_13rvkji7je.s[53]++;debugSection('CLI',[['version',version],['channel',channel],['bin',config.bin],['data',config.dataDir],['cache',config.cacheDir],['config',config.configDir]]);cov_13rvkji7je.s[54]++;debugSection('ENV',['NODE_OPTIONS',env_1.Env.DISABLE_AUTOUPDATE_LEGACY,'SFDX_BINPATH','SFDX_COMPILE_CACHE',env_1.Env.DISABLE_AUTOUPDATE_OCLIF,env_1.Env.CLI_MODE,env_1.Env.CLI_INSTALLER,env_1.Env.LAZY_LOAD_MODULES,env_1.Env.NPM_REGISTRY,'SFDX_REDIRECTED',env_1.Env.S3_HOST,env_1.Env.UPDATE_INSTRUCTIONS].map(key=>{cov_13rvkji7je.f[7]++;cov_13rvkji7je.s[55]++;return[key,env.getString(key,'<not set>')];}));cov_13rvkji7je.s[56]++;debugSection('ARGS',process.argv.map((arg,i)=>{cov_13rvkji7je.f[8]++;cov_13rvkji7je.s[57]++;return[i.toString(),arg];}));}//# sourceMappingURL=cli.js.map