"use strict";/*
 * Copyright (c) 2018, salesforce.com, inc.
 * All rights reserved.
 * Licensed under the BSD 3-Clause license.
 * For full license text, see LICENSE.txt file in the repo root or https://opensource.org/licenses/BSD-3-Clause
 */var cov_4oixof2m5=function(){var path="/srv/jenkins/workspace/SalesforceDXPublishing-Production/master/sfdx-cli-master-artifacts/repo-artifacts/tmp/base/dist/hooks/verifyPluginVersion.js";var hash="d69f201b3bd492a6b4b7543a44d49514588d873b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/srv/jenkins/workspace/SalesforceDXPublishing-Production/master/sfdx-cli-master-artifacts/repo-artifacts/tmp/base/dist/hooks/verifyPluginVersion.js",statementMap:{"0":{start:{line:8,column:0},end:{line:8,column:62}},"1":{start:{line:9,column:19},end:{line:9,column:41}},"2":{start:{line:10,column:22},end:{line:14,column:1}},"3":{start:{line:15,column:20},end:{line:15,column:28}},"4":{start:{line:20,column:13},end:{line:28,column:1}},"5":{start:{line:21,column:4},end:{line:27,column:5}},"6":{start:{line:22,column:23},end:{line:22,column:37}},"7":{start:{line:23,column:8},end:{line:26,column:9}},"8":{start:{line:24,column:12},end:{line:25,column:75}},"9":{start:{line:29,column:0},end:{line:29,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:20,column:13},end:{line:20,column:14}},loc:{start:{line:20,column:38},end:{line:28,column:1}},line:20}},branchMap:{"0":{loc:{start:{line:21,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:27,column:5}},{start:{line:21,column:4},end:{line:27,column:5}}],line:21},"1":{loc:{start:{line:21,column:8},end:{line:21,column:55}},type:"binary-expr",locations:[{start:{line:21,column:8},end:{line:21,column:22}},{start:{line:21,column:26},end:{line:21,column:55}}],line:21},"2":{loc:{start:{line:23,column:8},end:{line:26,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:26,column:9}},{start:{line:23,column:8},end:{line:26,column:9}}],line:23},"3":{loc:{start:{line:23,column:12},end:{line:23,column:142}},type:"binary-expr",locations:[{start:{line:23,column:12},end:{line:23,column:47}},{start:{line:23,column:51},end:{line:23,column:83}},{start:{line:23,column:87},end:{line:23,column:142}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"d69f201b3bd492a6b4b7543a44d49514588d873b"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_4oixof2m5.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const versions_1=(cov_4oixof2m5.s[1]++,require("../versions"));const FORCE_PLUGINS=(cov_4oixof2m5.s[2]++,['salesforcedx','salesforce-alm','force-language-services']);const MIN_VERSION=(cov_4oixof2m5.s[3]++,'45.8.0');/**
 * A CLI plugin preinstall hook that checks that the plugin's version is v7-compatible,
 * if it is recognized as a force namespace plugin.
 */cov_4oixof2m5.s[4]++;const hook=async function(options){cov_4oixof2m5.f[0]++;cov_4oixof2m5.s[5]++;if((cov_4oixof2m5.b[1][0]++,options.plugin)&&(cov_4oixof2m5.b[1][1]++,options.plugin.type==='npm')){cov_4oixof2m5.b[0][0]++;const plugin=(cov_4oixof2m5.s[6]++,options.plugin);cov_4oixof2m5.s[7]++;if((cov_4oixof2m5.b[3][0]++,FORCE_PLUGINS.includes(plugin.name))&&(cov_4oixof2m5.b[3][1]++,versions_1.isVersion(plugin.tag))&&(cov_4oixof2m5.b[3][2]++,versions_1.compareVersions(plugin.tag,MIN_VERSION)<0)){cov_4oixof2m5.b[2][0]++;cov_4oixof2m5.s[8]++;this.error(`The ${plugin.name} plugin can only be installed using a specific version when `+`the version is greater than or equal to ${MIN_VERSION}.`);}else{cov_4oixof2m5.b[2][1]++;}}else{cov_4oixof2m5.b[0][1]++;}};cov_4oixof2m5.s[9]++;exports.default=hook;//# sourceMappingURL=verifyPluginVersion.js.map